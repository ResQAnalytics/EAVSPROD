<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Callback</title>
  <script src="https://cdn.auth0.com/js/auth0-spa-js/2.1/auth0-spa-js.production.js" defer></script>
</head>
<body>
  <p>Processing login...</p>
  <script>
    async function handleRedirect() {
      const AUTH0_DOMAIN   = "dev-7qrkhpu6m3l7j1uq.us.auth0.com";
      const AUTH0_CLIENTID = "9UaKI0gCeDo836SurDwGwmDOAeRndt9U";
      const RETURN_URL     = "https://resqanalytics.github.io/EAVSPROD/";

      const auth0 = await createAuth0Client({
        domain: AUTH0_DOMAIN,
        clientId: AUTH0_CLIENTID,
        cacheLocation: "localstorage"
      });

      try {
        // Handle redirect back from Auth0
        const result = await auth0.handleRedirectCallback();
        console.log("Redirect result:", result);
      } catch (e) {
        console.error("Callback error:", e);
      }

      // Redirect back to main page
      window.location.href = RETURN_URL + "?logged_in=true";
    }

    window.addEventListener("load", handleRedirect);
  </script>
</body>
</html>

