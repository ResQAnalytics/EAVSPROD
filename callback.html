<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Auth Callback â€” EAVS Rescue Dashboard</title>
</head>
<body>
  <p>Processing login...</p>

  <script src="https://cdn.auth0.com/js/auth0-spa-js/2.1/auth0-spa-js.production.js"></script>
  <script>
    const AUTH0_DOMAIN   = "dev-7qrkhpu6m3l7j1uq.us.auth0.com";
    const AUTH0_CLIENTID = "9UaKI0gCeDo836SurDwGwmDOAeRndt9U";
    const RETURN_URL     = "https://resqanalytics.github.io/EAVSPROD/";

    (async function() {
      try {
        const auth0 = await createAuth0Client({
          domain: AUTH0_DOMAIN,
          clientId: AUTH0_CLIENTID,
          cacheLocation: "localstorage"
        });

        // Handle the redirect callback
        await auth0.handleRedirectCallback();

        // Redirect back to main page and indicate logged in
        window.location.href = RETURN_URL + "?logged_in=true";
      } catch (err) {
        console.error("Callback error:", err);
        document.body.innerHTML = "<p>Login failed. Check console for details.</p>";
      }
    })();
  </script>
</body>
</html>
